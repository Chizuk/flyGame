<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="PracticeCss.css">
    <meta charset="utf-8" />
    <title>Gamedev Canvas Workshop</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #eee; display: block; margin: 0 auto; }
    </style>
</head>
<body>

<canvas id="myCanvas" width="720" height="600"></canvas>

<script>
	var canvas = document.getElementById("myCanvas");//самолет игрока (начало)
	var ctx = canvas.getContext("2d");
	var paddleHeight = 30;
	var paddleWidth = 75;
	var paddleX = (canvas.width-paddleWidth)/2;
	var rightPressed = false;
	var leftPressed = false;
	document.addEventListener("keydown", keyDownHandler, false);
	document.addEventListener("keyup", keyUpHandler, false);
		function drawBrick() {
			var brickkHeight = 25;
			var brickkWidth = 75;
			ctx.beginPath();
			ctx.rect(paddleX, canvas.height-paddleHeight*2, brickkWidth, brickkHeight);
			ctx.fillStyle = "0095DD";
			ctx.fill();
			ctx.closePath();
		}
		function drawPlayer() {
			drawBrick();
			if(rightPressed) {
			paddleX += 5;}
			else if (leftPressed) {
			paddleX -= 5;}
		}
		
		function keyDownHandler (e) {
			if(e.keyCode == 39) {
			rightPressed = true;
			}
			else if (e.keyCode == 37) {
			leftPressed = true;
			}
		}
			function keyUpHandler (e) {
			if(e.keyCode == 39) {
			rightPressed = false;
			}
			else if (e.keyCode == 37) {
			leftPressed = false;
			}
		}//самолет игрока (конец)
		//keyCode: space- 32  up- 38 left- 37 right- 39 down- 40
//---------------------------- Выстрел игрока -----------------------------------------
		var bulletRadius = 5;// размеры снаряда(радиус шара)
		var BylletDY=2;
		var FireP=false;
		var Bull=0;
		document.addEventListener("keyup", PressFireUP, false);
		document.addEventListener("keydown", PressFireDOWN, false);
			//параметры для прорисовки пули игрока
		var NumderBull=10;//кол-во пуль 
		var bullArrX=[], bullArrY=[];//	масивы с координатами х и у 	
		var idBull=[];
		var Bullid;
		for(var i=0;i<NumderBull;i++){
			idBull[i]=0;
			bullArrY[i]=(canvas.height-paddleHeight*2)-bulletRadius;
		}
		

		
		function drawBulleStart(){
		
				for(var i=0;i<NumderBull;i++){
					if(idBull[i]==0){
						Bullid=i;
					}
				}
				idBull[Bullid]=1;
				bullArrX[Bullid]=(paddleX+paddleWidth/2);
		}
		
		function DestroyBull(){
			for(var i=0;i<NumderBull;i++){
				if(bullArrY[i]<-6){
					idBull[i]=0;
					bullArrY[i]=(canvas.height-paddleHeight*2)-bulletRadius;					
				}				
			}
		}
		
			
		function drawBullet(){
			for(var i=0;i<NumderBull;i++){
				if(idBull[i]== 1){
					ctx.beginPath();
					ctx.arc(bullArrX[i],bullArrY[i],bulletRadius,0,Math.PI*2);//X-отступ слева,Y- сверху 
					ctx.fillStyle="0095DD";
					ctx.fill();
					ctx.closePath;			
					bullArrY[i]-=BylletDY;		
					DestroyBull();
				}
			}
		}
		
		function PressFireUP (e) {
			if(e.keyCode == 32 || e.keyCode == 38) {
			FireP = true;
			drawBulleStart();
			}
		}
		
		function PressFireDOWN (e) {
			if(e.keyCode == 32 || e.keyCode == 38) {
			FireP = false;
			}
		}
//---------------------------------------------------------
//враги 
		var counter=0;//щетчик врагов
		var counterLive=0;//щетчик живых врагов
		var counterTypeA=0;//щетчик 
		var counterTypeB=0;
		
		function EnemyPilot(Type){
			this.Height=30;
			this.Width=75;
			if(Type==1){
				this.StartX=0;					
			}
			if(Type==2){
				this.StartX=canvas.width-this.Width;				
			}
			this.StartY=0;
			this.GoX=0.5;
			if(Type==1){
				this.GoY=0.5;
			}
			if(Type==1){
				this.GoY=-0.5;
			}
			this.life=true;//проверка на то что самолет не уничтожен 
		}
		
		var EnemyPilots =[];
		var MaxEnemy=4;
		
		function EnemySpawn(){
			if(counterLive<MaxEnemy){
				if(counterTypeA<=counterTypeB){
					EnemyPilots[counter]=new EnemyPilot(1);
					counterTypeA+=1;
					counter+=1;
					counterLive+=1;
				}
				if(counterTypeA>counterTypeB){
					EnemyPilots[counter]=new EnemyPilot(2);
					counter+=1;
					counterTypeB+=1;
					counterLive+=1;
				}				
			}
		}
		var arr;
		var bar;
		function EnemyDraw(){
			EnemySpawn();
			for(var i=0;i<=counter;i++){
			    arr=EnemyPilots[i].life;//i tyt
				if(arr == true){
					ctx.beginPath();					
					ctx.rect(EnemyPilots[i].StartX, EnemyPilots[i].StartY, EnemyPilots[i].Width, EnemyPilots[i].Height);
					ctx.fillStyle = "0095DD";
					ctx.fill();
					ctx.closePath();	
					//DestroyEnemy(i);
				}
			}	
		
		}
		function DestroyEnemy(i){
		//	for(int j=0;j<)
		
		}
			
//---------------------------------------------------------
		function drawGame(){
		ctx.clearRect(0, 0, canvas.width, canvas.height);
			drawPlayer();//прорисовка игрока 
			drawBullet();//прорисовка выстрелов игрока		
			EnemyDraw();//прорисовка врага 
		}
		
		setInterval(drawGame, 10);

		
		</script>

		
</body>
</html>
